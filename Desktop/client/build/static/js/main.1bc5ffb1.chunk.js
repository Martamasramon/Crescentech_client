(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{74:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n(20),s=n.n(c),i=n(22),o=n(3),u=n(23),l=n(24),d=n(27),j=n(26),h=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{id:"home",children:[Object(a.jsx)("div",{className:"heading",children:Object(a.jsx)("h1",{children:"Fusarium Test"})}),Object(a.jsxs)("div",{className:"body",children:[Object(a.jsx)("h2",{children:"Are you plants slowly dying?"}),Object(a.jsx)("p",{children:"If you suspect they might be infected with the Fusarium fungus, then you have come to the right place!"}),Object(a.jsx)("p",{children:"With our innovative technology we will help you diagnose your plants with a simple and quick test."})]})]})}}]),n}(r.Component),p=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{id:"contact",children:[Object(a.jsx)("div",{className:"heading",children:Object(a.jsx)("h1",{children:"Contact Us"})}),Object(a.jsxs)("div",{className:"body",children:[Object(a.jsx)("h2",{children:"Do you have any questions?"}),Object(a.jsx)("p",{children:"If so, you can contact us at:"}),Object(a.jsx)("p",{children:"marta.masramon@gmail.com"})]})]})}}]),n}(r.Component),b=n(6),O=n(5),f=n.n(O),x=n(12),m=n(13),v=n.n(m),g="SET_ALERT",y="REMOVE_ALERT",w="REGISTER_SUCCESS",T="REGISTER_FAIL",S="USER_LOADED",k="AUTH_ERROR",E="LOGIN_SUCCESS",A="LOGIN_FAIL",C="LOGOUT",L="GET_TESTS",N="TEST_ERROR",R="DELETE_TEST",I=function(e){e.auth;var t=e.deleteTest,n=e.test,r=n._id,c=n.title,s=n.result,i=(n.user,n.comments),o=n.date,u=n.location;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:c}),Object(a.jsx)("p",{children:s}),Object(a.jsxs)("p",{children:["Tested on ",o,", at ",u]}),Object(a.jsx)("p",{children:i}),Object(a.jsx)("button",{onClick:function(){return t(r)},children:"Delete"})]})};I.defaultProps={showActions:!0};var _=Object(b.b)((function(e){return{auth:e.auth}}),{deleteTest:function(e){return function(){var t=Object(x.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.delete("/api/test/".concat(e));case 3:return t.next=5,window.location.reload(!1);case 5:n({type:R,payload:e}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:N,payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}})(I),U=Object(b.b)((function(e){return{test:e.test}}),{getTests:function(){return function(){var e=Object(x.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("/api/test");case 3:n=e.sent,t({type:L,payload:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:N,payload:{msg:e.t0.response.statusText,status:e.t0.response.status}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.getTests,n=e.test,c=n.tests,s=n.loading;return Object(r.useEffect)((function(){t()}),[t]),s?Object(a.jsx)("h1",{children:"Loading"}):Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)("h1",{children:"Test Result History"}),Object(a.jsx)("div",{className:"tests",children:c.map((function(e){return Object(a.jsx)(_,{test:e},e._id)}))})]})})),D=n(16),F=n(4),G=n(17),q=n(77),J=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function(a){var r=Object(q.a)();a({type:g,payload:{msg:e,alertType:t,id:r}}),setTimeout((function(){return a({type:y,payload:r})}),n)}},H=function(e){e?v.a.defaults.headers.common["x-auth-token"]=e:delete v.a.defaults.headers.common["x-auth-token"]},M=function(){return function(){var e=Object(x.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&H(localStorage.token),e.prev=1,e.next=4,v.a.get("/api/auth");case 4:n=e.sent,t({type:S,payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:k});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},P=Object(b.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(){var n=Object(x.a)(f.a.mark((function n(a){var r,c,s,i;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Inside auth.js - register"),r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({email:e,password:t}),n.prev=3,n.next=6,v.a.post("/api/auth",c,r);case 6:s=n.sent,a({type:E,payload:s.data}),a(M()),n.next=16;break;case 11:n.prev=11,n.t0=n.catch(3),(i=n.t0.response.data.errors)&&i.forEach((function(e){return a(J(e.msg,"danger"))})),a({type:A});case 16:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.login,n=e.isAuthenticated,c=Object(r.useState)({email:"",password:""}),s=Object(G.a)(c,2),i=s[0],u=s[1],l=i.email,d=i.password,j=function(e){return u(Object(F.a)(Object(F.a)({},i),{},Object(D.a)({},e.target.name,e.target.value)))},h=function(){var e=Object(x.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t(l,d);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n?Object(a.jsx)(o.a,{to:"/"}):Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Let's get you signed in!"}),Object(a.jsxs)("form",{onSubmit:h,children:[Object(a.jsx)("input",{onChange:j,name:"email",placeholder:"Email",value:l}),Object(a.jsx)("input",{onChange:j,type:"password",name:"password",placeholder:"Password",value:d}),Object(a.jsx)("input",{type:"submit",value:"Log in"})]}),Object(a.jsx)("p",{children:Object(a.jsx)("a",{href:"/forgotpass",children:"Forgot password"})}),Object(a.jsxs)("p",{children:["Don't have an account? ",Object(a.jsx)("a",{href:"/signup",children:"Sign Up"})]})]})})),W=Object(b.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{setAlert:J,register:function(e){var t=e.name,n=e.email,a=e.password;return function(){var e=Object(x.a)(f.a.mark((function e(r){var c,s,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside auth.js - register"),c={headers:{"Content-Type":"application/json"}},s=JSON.stringify({name:t,email:n,password:a}),e.prev=3,e.next=6,v.a.post("/api/user",s,c);case 6:i=e.sent,r({type:w,payload:i.data}),r(M()),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(3),(o=e.t0.response.data.errors)&&o.forEach((function(e){return r(J(e.msg,"danger"))})),r({type:T});case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.setAlert,n=e.register,c=e.isAuthenticated,s=Object(r.useState)({name:"",email:"",password:"",password2:""}),i=Object(G.a)(s,2),u=i[0],l=i[1],d=u.name,j=u.email,h=u.password,p=u.password2,b=function(e){return l(Object(F.a)(Object(F.a)({},u),{},Object(D.a)({},e.target.name,e.target.value)))},O=function(){var e=Object(x.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),h!==p?t("Passwords do not match","danger"):n({name:d,email:j,password:h});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c?Object(a.jsx)(o.a,{to:"/"}):Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Fill in with your details to make an account"}),Object(a.jsxs)("form",{onSubmit:O,children:[Object(a.jsx)("input",{onChange:b,name:"name",placeholder:"Full name",value:d,required:!0}),Object(a.jsx)("input",{onChange:b,name:"email",placeholder:"Email",value:j,required:!0}),Object(a.jsx)("input",{type:"password",onChange:b,name:"password",placeholder:"Password",value:h,minLength:"6",required:!0}),Object(a.jsx)("input",{type:"password",onChange:b,name:"password2",placeholder:"Confirm password",value:p,minLength:"6",required:!0}),Object(a.jsx)("input",{type:"submit",value:"Sign up"})]}),Object(a.jsxs)("p",{children:["Already have an account? ",Object(a.jsx)("a",{href:"/login",children:"Log in"})]})]})}));var B=function(){var e=Object(r.useState)({email:""}),t=Object(G.a)(e,2),n=t[0],c=t[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Don't worry!"}),Object(a.jsx)("p",{children:"Just give us your email and we'll send you a link to reset your password!"}),Object(a.jsxs)("form",{children:[Object(a.jsx)("div",{children:Object(a.jsx)("input",{onChange:function(e){var t=e.target,n=(t.name,t.value);c((function(e){return{email:n}}))},name:"email",placeholder:"Email",value:n.email})}),Object(a.jsx)("button",{children:"Reset password"})]}),Object(a.jsxs)("p",{children:["Just remembered your password?",Object(a.jsx)("a",{href:"/login",children:"Log in"})]}),Object(a.jsxs)("p",{children:["Don't have an account? ",Object(a.jsx)("a",{href:"/signup",children:"Sign Up"})]})]})},V=Object(b.b)((function(e){return{alerts:e.alert}}))((function(e){return e.alerts.map((function(e){return Object(a.jsx)("div",{className:"alert alert-".concat(e.alertType),children:e.msg},e.id)}))})),Y=Object(b.b)((function(e){return{auth:e.auth}}),{logout:function(){return function(e){e({type:C})}}})((function(e){var t=e.auth,n=t.isAuthenticated,c=t.loading,s=e.logout,i=Object(a.jsxs)("ul",{className:"nav navbar-nav navbar-right",children:[Object(a.jsx)("li",{id:"home",children:Object(a.jsx)("a",{href:"/",children:"HOME"})}),Object(a.jsx)("li",{id:"contact",children:Object(a.jsx)("a",{href:"/contact",children:"CONTACT US"})}),Object(a.jsx)("li",{id:"tests",children:Object(a.jsx)("a",{href:"/tests",children:"RESULT HISTORY"})}),Object(a.jsx)("li",{id:"logout",children:Object(a.jsx)("a",{onClick:s,href:"/",children:"LOG OUT"})})]}),o=Object(a.jsxs)("ul",{className:"nav navbar-nav navbar-right",children:[Object(a.jsx)("li",{id:"home",children:Object(a.jsx)("a",{href:"/",children:"HOME"})}),Object(a.jsx)("li",{id:"contact",children:Object(a.jsx)("a",{href:"/contact",children:"CONTACT US"})}),Object(a.jsx)("li",{id:"login",children:Object(a.jsx)("a",{href:"/login",children:"LOG IN"})})]});return Object(a.jsx)("nav",{className:"navbar navbar-default",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"navbar-header",children:Object(a.jsx)("p",{className:"navbar-brand",children:"Crescentech"})}),!c&&Object(a.jsx)(r.Fragment,{children:n?i:o})]})})})),z=n(14),K=n(43),Q=n(44),X=n(45),Z=[];var $={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null};var ee={tests:[],test:null,loading:!0,error:{}};var te=Object(z.combineReducers)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(console.log("alert with type:",n,"and payload:",a),n){case g:return[].concat(Object(X.a)(e),[a]);case y:return e.filter((function(e){return e.id!==a}));default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case S:return Object(F.a)(Object(F.a)({},e),{},{isAuthenticated:!0,loading:!1,user:a});case w:case E:return localStorage.setItem("token",a.token),Object(F.a)(Object(F.a)(Object(F.a)({},e),a),{},{isAuthenticated:!0,loading:!1});case T:case k:case A:case C:return localStorage.removeItem("token"),Object(F.a)(Object(F.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1});default:return e}},test:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case L:return Object(F.a)(Object(F.a)({},e),{},{tests:a,loading:!1});case R:return Object(F.a)(Object(F.a)({},e),{},{posts:e.tests.filter((function(e){return e._id!==a})),loading:!1});case N:return Object(F.a)(Object(F.a)({},e),{},{error:a,loading:!1});default:return e}}}),ne=[Q.a],ae=Object(z.createStore)(te,{},Object(K.composeWithDevTools)(z.applyMiddleware.apply(void 0,ne)));localStorage.token&&H(localStorage.token);var re=function(){return Object(r.useEffect)((function(){ae.dispatch(M())}),[]),Object(a.jsx)(b.a,{store:ae,children:Object(a.jsx)(i.a,{children:Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(Y,{}),Object(a.jsx)(o.b,{exact:!0,path:"/",component:h}),Object(a.jsxs)("section",{children:[Object(a.jsx)(V,{}),Object(a.jsxs)(o.d,{children:[Object(a.jsx)(o.b,{exact:!0,path:"/contact",component:p}),Object(a.jsx)(o.b,{exact:!0,path:"/tests",component:U}),Object(a.jsx)(o.b,{exact:!0,path:"/login",component:P}),Object(a.jsx)(o.b,{exact:!0,path:"/signup",component:W}),Object(a.jsx)(o.b,{exact:!0,path:"/forgotpass",component:B})]})]})]})})})};n(74);s.a.render(Object(a.jsx)(re,{}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.1bc5ffb1.chunk.js.map